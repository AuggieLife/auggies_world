<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>First Post - Auggie's World</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://auggielife.github.io/auggies_world/first-post.html">

        <meta name="author" content="Dale Appleby" />
        <meta name="keywords" content="python,markdown,blog" />
        <meta name="description" content="This was brought up on Reddit in LearnPython. The question revolved around parsing a large text file that contained lines that represented an image." />

        <meta property="og:site_name" content="Auggie's World" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="First Post"/>
        <meta property="og:url" content="https://auggielife.github.io/auggies_world/first-post.html"/>
        <meta property="og:description" content="This was brought up on Reddit in LearnPython. The question revolved around parsing a large text file that contained lines that represented an image."/>
        <meta property="article:published_time" content="2018-03-10" />
            <meta property="article:section" content="This site" />
            <meta property="article:tag" content="python" />
            <meta property="article:tag" content="markdown" />
            <meta property="article:tag" content="blog" />
            <meta property="article:author" content="Dale Appleby" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://auggielife.github.io/auggies_world/theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="https://auggielife.github.io/auggies_world/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://auggielife.github.io/auggies_world/theme/css/pygments/native.css" rel="stylesheet">
    <link href="https://auggielife.github.io/auggies_world/theme/tipuesearch/tipuesearch.css" rel="stylesheet">
    <link rel="stylesheet" href="https://auggielife.github.io/auggies_world/theme/css/style.css" type="text/css"/>
        <link href="https://auggielife.github.io/auggies_world/static/css/custom.css" rel="stylesheet">





</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://auggielife.github.io/auggies_world/" class="navbar-brand">
Auggie's World            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://auggielife.github.io/auggies_world/pages/about.html">
                             About
                          </a></li>
                         <li><a href="https://auggielife.github.io/auggies_world/pages/book.html">
                             Book
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><span>
                <form class="navbar-search" action="/search.html">
                  <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input" required>
                </form></span>
              </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://auggielife.github.io/auggies_world/first-post.html"
                       rel="bookmark"
                       title="Permalink to First Post">
                        First Post
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-03-10T17:07:00-08:00"> Sat 10 March 2018</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://auggielife.github.io/auggies_world/tag/python.html">python</a>
        /
	<a href="https://auggielife.github.io/auggies_world/tag/markdown.html">markdown</a>
        /
	<a href="https://auggielife.github.io/auggies_world/tag/blog.html">blog</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <h3>Parse a text file into a list of named tuples</h3>
<p>This was brought up on Reddit in LearnPython.  The original post can be found here at this <a href="https://redd.it/822956">Reddit Link</a>.
The question revolved around parsing a large text file that contained lines that represented an image.</p>
<p>To Quote:</p>
<blockquote>
<p>Each line is encoded as such. The Number at the beginning represents the observation value, the 0's and 1's after the "im" represent the bits representing the image and the letter right after represents the output.
...
I want to go through every line in the text file and add it as a list of tuples (input, output). In addition the "_2" (index value) and "im" need to be removed.</p>
</blockquote>
<p>Lets start by declaring a namedtuple to store the info in and reading the file into a list and checking out what each line looks like.</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>

<span class="n">tup_list</span><span class="o">=</span><span class="p">[]</span>
<span class="n">LetterData</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;LetterData&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="s1">&#39;output&#39;</span><span class="p">])</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ocr_train.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">text</span><span class="p">[:</span><span class="mi">1</span><span class="p">])</span>
</pre></div>


<div class="highlight"><pre><span></span>[&#39;1\tim00000000000000000000000001110000011111000100011011000011100000011000000110000001100000111000111011111000000000000000000000000000\to\t_\n&#39;]
</pre></div>


<p>Cool!  So it looks like our 'elements' are separated by a tab.  Lets split each line by the <code>tab</code> and see what each line looks like.  For now we will just loop through lines 7-9 lines.  (I chose this to show some normal lines plus one of the "blank" lines that are spread throughout the file.)</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">text</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">10</span><span class="p">]:</span>
    <span class="n">elements</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="k">[&#39;8&#39;, &#39;im00000000000000000000000000000000000011110011100100100001011000011100000110000001100000011000000100000000000000000000000000000000&#39;, &#39;n&#39;, &#39;_\n&#39;]</span>
<span class="k">[&#39;9&#39;, &#39;im01111000110000001000000010000000111111110000000100000001000000010000000100000001000000010000000100000011000001100000010000000100&#39;, &#39;g&#39;, &#39;_\n&#39;]</span>
<span class="k">[&#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;\n&#39;]</span>
</pre></div>


<p>OK.. nice!  Except it looks like we have a "blank line" that only contains a 'new line' character (the last list item shown above) and the other lines all have a <code>_\n</code>.  Lets change our loop above to get rid of the <code>_\n</code>'s as we don't need them anyway.</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">text</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">10</span><span class="p">]:</span>
    <span class="n">elements</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;_</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="k">[&#39;8&#39;, &#39;im00000000000000000000000000000000000011110011100100100001011000011100000110000001100000011000000100000000000000000000000000000000&#39;, &#39;n&#39;, &#39;&#39;]</span>
<span class="k">[&#39;9&#39;, &#39;im01111000110000001000000010000000111111110000000100000001000000010000000100000001000000010000000100000011000001100000010000000100&#39;, &#39;g&#39;, &#39;&#39;]</span>
<span class="k">[&#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;]</span>
</pre></div>


<p>We may as well go one step further and filter out the empty elements in the list.  Let's chage our loop one more time.</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">text</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">10</span><span class="p">]:</span>
    <span class="n">elements</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;_</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)))</span>
    <span class="k">print</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="k">[&#39;8&#39;, &#39;im00000000000000000000000000000000000011110011100100100001011000011100000110000001100000011000000100000000000000000000000000000000&#39;, &#39;n&#39;]</span>
<span class="k">[&#39;9&#39;, &#39;im01111000110000001000000010000000111111110000000100000001000000010000000100000001000000010000000100000011000001100000010000000100&#39;, &#39;g&#39;]</span>
<span class="k">[]</span>
</pre></div>


<p>Looks good!  We still have an empty list but we will deal with that in a moment. Now the user wants the <code>input</code> which is the 2nd element in our list (index =1) less the <code>im</code> at the beginning of it and the <code>output</code> which is the third item (index=2).  Lets loop through our text, make sure that our list isn't empty and add our items to our <code>namedtuple</code></p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
    <span class="n">elements</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;_</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">elements</span><span class="p">:</span>
        <span class="n">tup_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">LetterData</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">elements</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;im&#39;</span><span class="p">),</span> <span class="n">output</span><span class="o">=</span><span class="n">elements</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
<span class="k">print</span> <span class="p">(</span><span class="o">*</span><span class="n">tup_list</span><span class="p">[:</span><span class="mi">10</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>LetterData(input=&#39;im00000000000000000000000000000000000011110011100100100001011000011100000110000001100000011000000100000000000000000000000000000000&#39;, output=&#39;n&#39;)
LetterData(input=&#39;im01111000110000001000000010000000111111110000000100000001000000010000000100000001000000010000000100000011000001100000010000000100&#39;, output=&#39;g&#39;)
LetterData(input=&#39;im00000000000000000000000001110000011111000100011011000011100000011000000110000001100000111000111011111000000000000000000000000000&#39;, output=&#39;o&#39;)
LetterData(input=&#39;im00000000000000000000000000000000000000000000000001111110110110111011000110110001000000000000000000000000000000000000000000000000&#39;, output=&#39;m&#39;)
LetterData(input=&#39;im00000000000000000000000000000000000000000000000011100110101011101011101010010011000000000000000000000000000000000000000000000000&#39;, output=&#39;m&#39;)
LetterData(input=&#39;im00000000000000000000000000000000000000000011000001100000100011001001011011100010000000110000000000000000000000000000000000000000&#39;, output=&#39;a&#39;)
LetterData(input=&#39;im00000000000000000000000000000000000011100001101000110010111000101110001011000010110000101000000110000001000000000000000000000000&#39;, output=&#39;n&#39;)
LetterData(input=&#39;im00000000010000000110000001110000010110000110100000101100001001100011001000010010011100101101011010011100101110011110111100000000&#39;, output=&#39;d&#39;)
LetterData(input=&#39;im00001100000000000000000000000000000000000000000000000000000000000000000000010000000100000001000000010000001100000010000000100000&#39;, output=&#39;i&#39;)
LetterData(input=&#39;im00000000000000000000000000000000000011110011100100100001011000011100000110000001100000011000000100000000000000000000000000000000&#39;, output=&#39;n&#39;)
</pre></div>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Part 1 of the example-post-series series</h4>
       <h5>Next articles</h5>
       <ul>
           <li><a href="https://auggielife.github.io/auggies_world/second-post.html">Second Post - Part 2</a></li>
           <li><a href="https://auggielife.github.io/auggies_world/fourth-post.html">Fourth Post - Part 4</a></li>
       </ul>
</section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="#"><i class="fa fa-you-can-add-links-in-your-config-file-square fa-lg"></i> You can add links in your config file</a></li>
    <li class="list-group-item"><a href="#"><i class="fa fa-another-social-link-square fa-lg"></i> Another social link</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Tag Cloud -->
<li class="list-group-item">
  <a href="https://auggielife.github.io/auggies_world/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
  <ul class="list-group " id="tags">
    <li class="list-group-item tag-1">
      <a href="https://auggielife.github.io/auggies_world/tag/python.html">python</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://auggielife.github.io/auggies_world/tag/blog.html">blog</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://auggielife.github.io/auggies_world/tag/pelican.html">pelican</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://auggielife.github.io/auggies_world/tag/tables.html">tables</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://auggielife.github.io/auggies_world/tag/markdown.html">markdown</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Tag Cloud -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="http://getpelican.com/" target="_blank">Pelican</a>
    </li>
    <li class="list-group-item">
      <a href="http://python.org/" target="_blank">Python.org</a>
    </li>
    <li class="list-group-item">
      <a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a>
    </li>
    <li class="list-group-item">
      <a href="#" target="_blank">You can modify those links in your config file</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Dale Appleby
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://auggielife.github.io/auggies_world/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://auggielife.github.io/auggies_world/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://auggielife.github.io/auggies_world/theme/js/respond.min.js"></script>

    <script src="https://auggielife.github.io/auggies_world/static/js/custom.js"></script>



</body>
</html>